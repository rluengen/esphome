# Pull-based OTA firmware updates from GitHub Pages
# Include this package to enable automatic firmware updates.
# Requires device_name and friendly_name substitutions.

http_request:

ota:
  - platform: http_request

update:
  - platform: http_request
    id: firmware_update
    name: "${friendly_name} Firmware Update"
    source: https://rluengen.github.io/esphome/firmware/${device_name}/manifest.json
    update_interval: 6h

button:
  - platform: template
    name: "${friendly_name} Check Firmware Update"
    icon: "mdi:update"
    entity_category: config
    on_press:
      - update.check: firmware_update

  - platform: template
    name: "${friendly_name} Install Firmware Update"
    icon: "mdi:download"
    entity_category: config
    on_press:
      - update.perform: firmware_update
